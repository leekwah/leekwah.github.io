## response 기본 객체

response 기본 객체는 웹 브라우저에 보내는 응답 정보를 담고 있다.<br>헤더 정보 입력, 리다이렉트 등 몇 가지 기능이 더 있으나, JSP 페이지에서는 거의 사용되지 않는다.

## 웹 브라우저에 헤더 정보 전송하기

response 기본 객체는 응답 정보에 헤더를 추가하는 기능을 제공한다.

### response 기본 객체가 제공하는 헤더 추가 메서드 (리턴 타입은 모두 void)

| 메서드                                | 설명                                                         |
| ------------------------------------- | ------------------------------------------------------------ |
| addDateHeader(String name, long date) | name 헤더에 date를 추가한다.<br>(date는 1970년 1월 1일 이후 흘러간 시간을 1/1000초 단위로 나타낸다.) |
| addHeader(String name, String value)  | name 헤더에 value를 값으로 추가한다.                         |
| addIntHeader(String name, int value)  | name 헤더에 정수 값 value를 추가한다.                        |
| setDateHeader(String name, long date) | name 헤더의 값을 date로 지정한다.<br>(date는 1970년 1월 1일 이후 흘러간 시간을 1/1000초 단위로 나타낸다.) |
| setHeader(String name, String value)  | name 헤더의 값을 value로 지정한다.                           |
| setIntHeader(String name, int value)  | name 헤더의 값을 정수 값 value로 지정한다.                   |
| containsHeader(String name)           | 이름이 name인 헤더를 포함하고 있을 경우 true를, 그렇지 않을 경우 false를 리턴한다. |

add로 시작하는 메서드는 기존의 헤더에 새로운 값을 추가할 때 사용되며, set로 시작하는 메서드는 헤더의 값을 새로 지정할 때 사용된다.

## 웹 브라우저 캐시 제어를 위한 응답 헤더 입력

웹 어플리케이션을 개발하다 보면 새로운 내용을 DB에 추가했는데도 웹 브라우저에 출력되는 내용이 바뀌지 않는 경우가 있다. 웹 브라우저가 변경된 내용을 출력하지 않은 이유 중 하나는 웹 브라우저가 서버가 생성한 결과를 출력하지 않고 캐시에 저장된 데이터를 출력하기 때문이다.

> 캐시(Cache)란?
>
> 첫 번째 요청과 두 번째 요청 사이에 출력한 결과에 차이가 없다면 웹 브라우저는 불필요하게 동일한 응답 결과를 두 번 요청한 셈이 된다.<br>캐시는 이렇게 동일한 데이터를 중복해서 로딩하지 않도록 할 때 사용한다.<br>웹 브라우저는 첫 번째 요청 시 응답 결과를 로컬 PC의 임시 보관소인 캐시에 저장한다.<br>이후, 동일한 URI에 대한 요청이 있으면 WAS에 접근하지 않고 로컬 PC에 저장된 응답 결과를 사용한다.<br>캐시에 보관된 데이터를 사용하는 경우, 웹 브라우저의 응답 속도를 향상시킬 수 있다.

HTTP는 특수한 응답 헤더를 통해서 웹 브라우저가 응답 결과를 캐시 할 것인지에 대한 여부를 설정할 수 있다.<br>

### response 기본 객체가 제공하는 헤더 추가 메서드

| 응답 헤더     | 설명                                                         |
| ------------- | ------------------------------------------------------------ |
| Cache-Control | HTTP 1.1 버전에서 지원하는 헤더로서, 이 헤더의 값을 "no-cache"로 지정하면<br>웹 브라우저는 응답 결과를 캐시하지 않는다.<br>"no cache"로 설정하더라도 응답 내용을 캐시 저장소에 보관할 수 있다.<br>즉, 응답 결과가 캐시 저장소 자체에 보관되지 않도록 하려면, 이 헤더에 "no-store"를 추가한다. |
| Pragma        | HTTP 1.0 버전에서 지원하는 헤더로서, 이 헤더의 값을 "no-cache"로 지정하면<br> 웹 브라우저는 응답 결과를 캐시에 저장하지 않는다. |
| Expires       | HTTP 1.0 버전에서 지원하는 헤더로서, 응답 결과의 만료일을 지정한다.<br> 만료일을 현재 시간보다 이전으로 설정함으로써 캐시에 보관되지 않도록 할 수 있다. |

최근 웹 브라우저는 HTTP 1.1 버전을 지원하기 때문에 Cache-Control 응답 헤더 값을 "no-cache"로 지정하면 응답 결과를 웹 브라우저가 캐시에 보관하지 않도록 할 수 있다.<br>하지만, HTTP 1.0 버전만 지원하는 웹 브라우저가 존재할 수 있기 때문에 Cache-Control 응답 헤더와 Pragma 응답 헤더를 모두 설정해주는 것이 좋다.

```JSP
<%
    response.setHeader("Cache-Control", "no-cache");
    response.addHeader("Cache-Control", "no-store");
    response.setHeader("Pragma", "No-Cache");
    response.setDateHeader("Expires", "1L");
%>
```

위 코드에서 Expires 응답 헤더의 값으로 long 타입 숫자를 설정했다.<br>이 값은 1970년 1월 1일 이후를 기준으로 1/1000초 단위로 값을 입력한다.<br>위 설정에 1L을 값으로 주었는데, 이는 만료일을 1970년 1월 1일 0시 0분 0.001초로 설정하는 것이므로 HTTP 1.0을 지원하는 웹 브라우저는 응답 결과를 캐시하지 않는다.

## 리다이렉트를 이용해서 페이지 이동하기

response 기본 객체에서 많이 사용되는 기능 중 하나는 리다이렉트 기능이다.<br>리다이렉트는 웹 서버가 웹 브라우저에게 다른 페이지로 이동하라고 응답하는 기능이다. 



<img src="C:\Users\lkwng\Desktop\1.png" style="zoom:200%;" />