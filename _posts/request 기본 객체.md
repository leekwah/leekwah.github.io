

## request 기본 객체

request 기본 객체는 JSP 페이지에서 가장 만힝 사용되는 기본 객체며, 웹 브라우저의 요청과 관련이 있다.<br>웹 브라우저에 웹 사이트의 주소를 입력하면, 웹 브라우저는 해당 웹 서버에 연결한 후 요청 정보를 전송하는데, 이 요청 정보를 제공하는 것이 request 기본 객체이다.

### request 기본 객체의 기능

- 클라이언트(웹 브라우저)와 관련된 정보 읽기 기능
- 서버와 관련된 정보 읽기 기능
- 클라이언트가 전송한 요청 파라미터 읽기 기능
- 클라이언트가 전송한 요청 헤더 읽기 기능
- 클라이언트가 전송한 쿠키 읽기 기능
- 속성 처리 기능

### 클라이언트 정보 및 서버 정보 관련 메서드

| 매서드                 | 리턴 타입 | 설명                                                         |
| ---------------------- | :-------: | ------------------------------------------------------------ |
| getRemoteAddr()        |  String   | 웹 서버에 연결한 클라이언트의 IP 주소를 구한다.              |
| getContentLength()     |   long    | 클라이언트가 전송한 요청 정보의 길이를 구한다.<br>전송된 데이터의 길이를 알 수 없는 경우 -1을 리턴한다. |
| getCharacterEncoding() |  String   | 클라이언트가 요청 정보를 전송할 때 사용한 캐릭터의 인코딩을 구한다. |
| getContentType()       |  String   | 클라이언트가 요청 정보를 전송할 때 사용한 컨텐츠의 타입을 구한다. |
| getProtocol()          |  String   | 클라이언트가 요청한 프로토콜을 구한다.                       |
| getMethod()            |  String   | 웹 브라우저가 정보를 전송할 때 사용한 방식을 구한다.         |
| getRequestURI()        |  String   | 웹 브라우저가 요청한 URL에서 경로를 구한다.                  |
| getContextPath()       |  String   | JSP 페이지가 속한 웹 어플리케이션의 컨텍스트 경로를 구한다.  |
| getServerName()        |  String   | 연결할 때 사용한 서버 이름을 구한다.                         |
| getServerPort()        |    int    | 서버가 실행중인 포트 번호를 구한다.                          |

## [요청 파라미터 처리]

요청 URL을 처리할 웹 프로그램은 웹 브라우저가 전송한 요청 파라미터를 이용해서 알맞은 기능을 구현해야 한다.

### request 기본 객체의 요청 파라미터 관련 메서드

| 매서드                          | 리턴 타입             | 설명                                                         |
| ------------------------------- | --------------------- | ------------------------------------------------------------ |
| getParameter(String name)       | String                | 이름이 name인 파라미터의 값을 구한다.<br>존재하지 않을 경우에는 null을 리턴한다. |
| getParameterValues(String name) | String[]              | 이름이 name인 파라미터의 값을 배열로 구한다.<br/>존재하지 않을 경우에는 null을 리턴한다. |
| getParameterNames()             | java.util.Enumeration | 웹 브라우저가 전송한 파라미터의 이름 목록을 구한다.          |
| getParameterMap()               | java.util.Map         | 웹 브라우저가 전송한 파라미터의 맵을 구한다.<br>맵은 <파라미터 이름, 값> 쌍으로 구성된다. |

### GET 방식 전송과 POST 방식 전송

<span style="color:red">웹 브라우저는 GET 방식 전송과 POST 방식의 두 가지 방식 중 한 가지를 이용해서 파라미터를 전송한다.</span><br>GET 방식과 POST 방식의 차이점은 전송 방식에 있다.<br>GET 방식은 요청 URL에 파라미터를 붙여서 전송한다.<br>GET 방식은 URL의 경로 뒤에 물음표('?')와 함께 파라미터를 붙여 전송하는데, 이를 <u>쿼리 문자열(query string)</u>이라고 한다.<br>각각의 파라미터는 앰퍼샌드(&) 기호로 구분하며, 파라미터의 이름과 값은 등호 기호(=)로 구분한다.<br>GET 방식은 URL의 쿼리 문자열로 전송되기 때문에, 폼을 사용하지 않아도 파라미터를 전송할 수 있다.

### GET 방식으로 파라미터 전송 시 인코딩 결정 규칙

| GET 방식 이용 시 파라미터 전송 방법                          | 인코딩 결정           |
| ------------------------------------------------------------ | --------------------- |
| \<a\> 태그의 링크 태그에 쿼리 문자열 추가                    | 웹 페이지 인코딩 사용 |
| HTML 폼(FORM)의 메서드 속성값을 "GET"으로 지정해서 폼을 전송 | 웹 페이지 인코딩 사용 |
| 웹 브라우저 주소에 직접 쿼리 문자열을 포함하는 URL 입력      | 웹 브라우저마다 다름  |

### 톰캣에서 GET 방식 파라미터를 위한 인코딩 처리

server.xml 파일에서 \<Connector\>의 useBodyEncodingForURI 속성의 값을 true로 지정한다.

## 요청 헤더의 정보 처리

### request 기본 객체가 제공하는 헤더 관련 메서드

| 메서드                     | 리턴 타입             | 설명                                                         |
| -------------------------- | --------------------- | ------------------------------------------------------------ |
| getHeader(String name)     | String                | 지정한 이름의 헤더 값을 구한다.                              |
| getHeaders(String name)    | java.util.Enumeration | 지정한 이름의 헤더 목록을 구한다.                            |
| getHeaderNames()           | java.util.Enumeration | 모든 헤더의 이름을 구한다.                                   |
| getIntHeader(String name)  | int                   | 지정한 헤더의 값을 정수 값으로 읽어온다.                     |
| getDateHeader(String name) | long                  | 지정한 헤더의 값을 시간 값으로 읽어온다.<br>(이때 시간은 1970년 1월 1일 이후로 흘러간 1/1000초 단위의 값을 가진다. |

